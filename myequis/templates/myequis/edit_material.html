{% extends "form-base.html" %}

{% block nav-items %}
{% endblock %}

{% block header %}
{{ material.name }}
{% endblock %}

{% block script %}
<script language="JavaScript">

  function refresh(){

    var disposedFields = document.getElementById("disposedFields")
    var disposedAtFields = document.getElementById("disposedAtFields")
    var storedFields = document.getElementById("storedFields")
    var elementDisposed = document.getElementById("id_disposed")
    var elementStored = document.getElementById("id_stored")

    if(elementDisposed.checked == true) {
      disposedFields.style.visibility = "visible";
      storedFields.style.visibility = "hidden";
    }
    else if(elementStored.checked == true) {
      disposedFields.style.visibility = "hidden";
      storedFields.style.visibility = "visible";
    } else {
      disposedFields.style.visibility = "visible";
      storedFields.style.visibility = "visible";
    }

    if(elementDisposed.checked == true) {
      disposedAtFields.style.visibility = "visible";
    }
    else{
      disposedAtFields.style.visibility = "hidden";
    }
  }

  window.onload = refresh;

</script>
{% endblock %}


{% block main %}
{% include "article-title.html" with title="Edit Material" %}

<div>
{{ mounting_info }}
</div>

<form action="" method="post">
  {% csrf_token %}

  <div>{{ form.manufacture.label }}</div>
  <div>{{ form.manufacture }}</div>

  <div>{{ form.name.label }}</div>
  <div>{{ form.name }}</div>

  <div>{{ form.type.label }}</div>
  <div>{{ form.type }}</div>

  <div>{{ form.size.label }}</div>
  <div>{{ form.size }}</div>

  <div>{{ form.weight.label }}</div>
  <div>{{ form.weight }}</div>

  <div>{{ form.price.label }}</div>
  <div>{{ form.price }}</div>

  <div>{{ form.comment.label }}</div>
  <div>{{ form.comment }}</div>

  {% if not mounted %}
  <div id="storedFields">
    <div>{{ form.stored.label }}</div>
    <div onclick="refresh">{{ form.stored }}</div>
  </div>

  <div id="disposedFields">
    <div>{{ form.disposed.label }}</div>
    <div onclick="refresh">{{ form.disposed }}</div>
  </div>

  <div id="disposedAtFields">
    <div>{{ form.disposedAt.label }}</div>
    <div>{{ form.disposedAt }}</div>
  </div>
  {% endif %}

  {{ form.mounting_id }}
  <input type="hidden" name="next" value="{{ request.path }}">

  {% include "form-buttons-open.html" %}
  <input  {% include "form-button-class.html" %} type="submit" name="save" value="Save">
  <input  {% include "form-button-class.html" %} type="submit" name="cancel" value="Cancel">
  {% include "form-buttons-close.html" %}

</form>
{% endblock %}
